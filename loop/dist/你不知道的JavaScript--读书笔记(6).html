<!DOCTYPE html><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta charset="utf-8"><title>你不知道的JavaScript - Documents</title><meta name="description" content=""><meta name="author" content=""><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="stylesheet" href="assets/css/bulma.min.css"><link rel="stylesheet" href="assets/css/app.css"><!--[if lt IE 9]>
<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]--><link rel="shortcut icon" href=""></head><body dir="ltr"><nav class="columns navbar"><div class="column logo is-3 is-offset-1"><a class="is-brand" href="index.html">Documents</a></div></nav><div class="columns content"><div class="column is-2-desktop is-3-widescreen is-hidden-touch"></div><div class="column article-container is-11-tablet is-8-desktop is-6-widescreen"><div class="breadcrumb-area"><a href="index.html" class="breadcrumb-item">Home</a><span class="breadcrumb-delimiter"> &gt; </span><a href="你不知道的JavaScript--读书笔记(6).html" class="breadcrumb-item">你不知道的JavaScript</a></div><h1 class="article-title">你不知道的JavaScript</h1><div class="article"><h2 id="动态作用域">动态作用域 <a class="markdownIt-Anchor" href="#动态作用域">#</a></h2><blockquote><p>词法作用域是一套关于引擎如何寻找变量以及会在何处找到变量的规则。词法作用域最重要的特征是它的定义过程发生在代码的书写阶段（假设你没有使用eval()或with）</p></blockquote><p>动态作用域并不关心函数和作用域是如何声明以及在何处声明的，只关心它们从何处调用。作用域链是基于调用栈的，而不是代码中的作用域嵌套。</p><p>主要区别：词法作用域是在写代码或者说定义时确定的，而动态作用域是在运行时确定的。（this 也是！）词法作用域关注函数在何处声明，而动态作用域关注函数从何处调用。</p><pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log( a ); <span class="hljs-comment">// 2</span>
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> a = <span class="hljs-number">3</span>;
    foo();
}
<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;
bar();

显然javascript不具有动态作用域，这里是词法作用域让foo()中的a头脑发福哦RHS引用到了全局作用域中的a。因此会输出<span class="hljs-number">2</span>
</code></pre><h2 id="块作用域替代方案">块作用域替代方案 <a class="markdownIt-Anchor" href="#块作用域替代方案">#</a></h2><ul><li><p>with</p></li><li><p>catch分句</p></li><li><p>ES6引入let</p></li></ul><pre class="hljs"><code><span class="hljs-keyword">let</span> (a = <span class="hljs-number">2</span>) {
<span class="hljs-built_in">console</span>.log( a ); <span class="hljs-comment">// 2</span>
}
<span class="hljs-built_in">console</span>.log( a ); <span class="hljs-comment">// ReferenceError</span>
</code></pre><p>同隐式地劫持一个已经存在的作用域不同，let声明会创建一个显式的欧用于并与其进行绑定。</p></div><div dir="ltr" class="level article-bar is-mobile"><div class="level-item has-text-centered"><a title="previous page" class="previouse-article-link" href="你不知道的JavaScript--读书笔记(5).html"><span class="icon icon-previous" data-icon="previous"></span><span class="link-content">&laquo; Previous</span></a></div><div class="level-item has-text-centered"><a title="font size" class="link-item link-item-size"><span class="icon icon-size" data-icon="size"></span></a></div><div class="level-item has-text-centered"><a title="table of content" class="link-item link-item-toc"><span class="icon icon-toc" data-icon="toc"></span></a></div><div class="level-item has-text-centered"><a title="top" href="#"><span class="icon icon-up" data-icon="up"></span> <span class="link-content">⤊ Top</span></a></div><div class="level-item has-text-centered"><a title="next page" class="next-article-link" href="你不知道的JavaScript--读书笔记(7).html"><span class="icon icon-next" data-icon="next"></span><span class="link-content">Next &raquo;</span></a></div></div></div><div class="column is-2-widescreen is-hidden"></div></div><div class="columns foot"><div class="column is-3 is-offset-9 build-by">Build by <a href="https://github.com/ruanyf/loppo" target="_blank">Loppo</a> 0.6.14</div></div><div class="book-toc notification is-warning is-hidden"><h3>Table of chapters &nbsp;<span class="title-close"><a class="button is-danger"> Close</a></span></h3><ul class="chapter-area"><li class="chapter-item"><a href="note1.html">2 Node简介</a></li><li class="chapter-item"><a href="note2.html">Node核心API基础</a></li><li class="chapter-item"><a href="note3.html">4 应用缓冲区处理、编码和解码二进制数据</a></li><li class="chapter-item"><a href="note4.html">使用事件发射器简化事件绑定</a></li><li class="chapter-item"><a href="你不知道的JavaScript--读书笔记(1).html">《你不知道的javascript》（上）</a></li><li class="chapter-item"><a href="你不知道的JavaScript--读书笔记(2).html">词法作用域</a></li><li class="chapter-item"><a href="你不知道的JavaScript--读书笔记(5).html">作用域闭包</a></li><li class="chapter-item chapter-item-current"><a href="你不知道的JavaScript--读书笔记(6).html">你不知道的JavaScript</a></li><li class="chapter-item"><a href="你不知道的JavaScript--读书笔记(7).html">this</a></li><li class="chapter-item"><a href="你不知道的javascript--读书笔记(3).html">函数作用域和块作用域</a></li><li class="chapter-item"><a href="你不知道的javascript--读书笔记(4).html">提升</a></li></ul></div><div class="progress-indicator"></div><!-- SCRIPTS --><script>var LOPPO={current_path:"你不知道的JavaScript--读书笔记(6).md",relative_root_path:"",article_toc:'<ul class="markdownIt-TOC">\n<li><a href="#%E5%8A%A8%E6%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F">动态作用域</a></li>\n<li><a href="#%E5%9D%97%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88">块作用域替代方案</a></li>\n</ul>\n'}</script><script src="assets/js/app.js"></script></body></html>